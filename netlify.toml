# ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
# ‚ñë                    SISTEMA DE AUTOMA√á√ÉO E IA v6.0                      ‚ñë
# ‚ñë                        Configura√ß√£o Netlify                            ‚ñë
# ‚ñë                                                                         ‚ñë
# ‚ñë                       Criado por: Marcelo D'√°vila                       ‚ñë
# ‚ñë                    Email: suporte@marcelodavila.com.br                  ‚ñë
# ‚ñë                     ¬© 2025 - Todos os direitos reservados               ‚ñë
# ‚ñë                                                                         ‚ñë
# ‚ñë  AVISO LEGAL: Este software √© protegido por direitos autorais e leis    ‚ñë
# ‚ñë  de propriedade intelectual. O uso n√£o autorizado √© proibido por lei.   ‚ñë
# ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë

# ===============================================
# CONFIGURA√á√ïES GERAIS DO SITE
# ===============================================
[build]
  # Diret√≥rio de publica√ß√£o
  publish = "."
  
  # Comando de build (se necess√°rio)
  command = "echo 'üöÄ Sistema de Automa√ß√£o e IA v6.0 - Build iniciado' && echo 'üë®‚Äçüíª Desenvolvido por: Marcelo D\\'√°vila' && echo 'üìß Suporte: suporte@marcelodavila.com.br'"
  
  # Vari√°veis de ambiente do build
  environment = { NODE_VERSION = "18", HUGO_VERSION = "0.100.2" }

# ===============================================
# CONFIGURA√á√ïES DE CONTEXTO
# ===============================================

# Produ√ß√£o (branch main)
[context.production]
  command = "echo 'üöÄ Build de produ√ß√£o iniciado'"
  
  [context.production.environment]
    SYSTEM_ENV = "production"
    SYSTEM_NAME = "Sistema de Automa√ß√£o e IA"
    SYSTEM_VERSION = "6.0"
    AUTHOR = "Marcelo D'√°vila"
    AUTHOR_EMAIL = "suporte@marcelodavila.com.br"
    COPYRIGHT = "¬© 2025 Marcelo D'√°vila - Todos os direitos reservados"

# Staging (branch develop)
[context.deploy-preview]
  command = "echo 'üöß Build de preview iniciado'"
  
  [context.deploy-preview.environment]
    SYSTEM_ENV = "staging"
    SYSTEM_NAME = "Sistema de Automa√ß√£o e IA (Staging)"

# Branch develop
[context.branch-deploy]
  command = "echo 'üîß Build de desenvolvimento iniciado'"

# ===============================================
# REDIRECIONAMENTOS E REWRITES
# ===============================================
[[redirects]]
  # P√°gina principal
  from = "/"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # Documenta√ß√£o
  from = "/docs/*"
  to = "/README.md"
  status = 200

[[redirects]]
  # API de sa√∫de
  from = "/health"
  to = "/.netlify/functions/health"
  status = 200

[[redirects]]
  # Download do setup
  from = "/setup"
  to = "/setup.sh"
  status = 200
  headers = {Content-Type = "application/x-sh"}

[[redirects]]
  # GitHub
  from = "/github"
  to = "https://github.com/marcelodavila/automation-system"
  status = 301

[[redirects]]
  # Suporte
  from = "/suporte"
  to = "mailto:suporte@marcelodavila.com.br"
  status = 301

[[redirects]]
  # Instala√ß√£o via curl
  from = "/install"
  to = "/setup.sh"
  status = 200
  headers = {Content-Type = "text/plain"}

[[redirects]]
  # SPA fallback
  from = "/*"
  to = "/index.html"
  status = 200

# ===============================================
# CABE√áALHOS DE SEGURAN√áA
# ===============================================
[[headers]]
  for = "/*"
  [headers.values]
    # Seguran√ßa geral
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    
    # HTTPS
    Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"
    
    # Pol√≠tica de conte√∫do
    Content-Security-Policy = """
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com https://fonts.googleapis.com;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
      font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
      img-src 'self' data: https:;
      connect-src 'self' https:;
      media-src 'self';
      object-src 'none';
      child-src 'none';
      frame-ancestors 'none';
      form-action 'self';
      base-uri 'self';
    """
    
    # Informa√ß√µes do desenvolvedor
    X-Developer = "Marcelo D'√°vila"
    X-Developer-Email = "suporte@marcelodavila.com.br"
    X-Copyright = "¬© 2025 Marcelo D'√°vila - Todos os direitos reservados"
    X-System-Version = "6.0"
    
    # Cache control
    Cache-Control = "public, max-age=3600"

# Cabe√ßalhos espec√≠ficos para arquivos est√°ticos
[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

# Cabe√ßalhos para arquivos de instala√ß√£o
[[headers]]
  for = "*.sh"
  [headers.values]
    Content-Type = "application/x-sh"
    Content-Disposition = "attachment"
    X-Content-Type-Options = "nosniff"
    Cache-Control = "no-cache, no-store, must-revalidate"

# Cabe√ßalhos para documenta√ß√£o
[[headers]]
  for = "*.md"
  [headers.values]
    Content-Type = "text/plain; charset=utf-8"
    Cache-Control = "public, max-age=1800"

# ===============================================
# CONFIGURA√á√ïES DE EDGE FUNCTIONS
# ===============================================
[[edge_functions]]
  function = "system-info"
  path = "/api/system-info"

[[edge_functions]]
  function = "health-check"
  path = "/api/health"

[[edge_functions]]
  function = "analytics"
  path = "/api/analytics/*"

# ===============================================
# CONFIGURA√á√ïES DE FORMUL√ÅRIOS
# ===============================================
[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.html]
  pretty_urls = true

[build.processing.images]
  compress = true

# ===============================================
# CONFIGURA√á√ïES DE PLUGINS
# ===============================================
[[plugins]]
  package = "netlify-plugin-submit-sitemap"
  
  [plugins.inputs]
    baseUrl = "https://automation-system.netlify.app"
    sitemapPath = "/sitemap.xml"
    ignorePeriod = 0
    providers = [
      "google",
      "bing",
      "yandex"
    ]

[[plugins]]
  package = "@netlify/plugin-lighthouse"
  
  [plugins.inputs]
    output_path = "reports/lighthouse.html"
    thresholds = { performance = 0.9, accessibility = 0.9, "best-practices" = 0.9, seo = 0.9 }

[[plugins]]
  package = "netlify-plugin-checklinks"
  
  [plugins.inputs]
    entryPoints = ["index.html"]
    recursive = true
    pretty = true
    skipPatterns = ["mailto:*"]

# ===============================================
# CONFIGURA√á√ïES DE SPLIT TESTING
# ===============================================
[[split_tests]]
  id = "homepage-version"
  path = "/"
  branches = [
    { branch = "main", percentage = "90%" },
    { branch = "experiment", percentage = "10%" }
  ]

# ===============================================
# CONFIGURA√á√ïES DE ANALYTICS
# ===============================================
[analytics]
  provider = "google"

# ===============================================
# CONFIGURA√á√ïES DE NOTIFICA√á√ïES
# ===============================================
[notifications]
  enabled = true
  
  [[notifications.email]]
    event = "deploy-succeeded"
    email = "suporte@marcelodavila.com.br"

  [[notifications.email]]
    event = "deploy-failed"
    email = "suporte@marcelodavila.com.br"

  [[notifications.slack]]
    event = "deploy-succeeded"
    channel = "#deployments"
    
  [[notifications.slack]]
    event = "deploy-failed"
    channel = "#alerts"

# ===============================================
# VARI√ÅVEIS DE AMBIENTE
# ===============================================
[build.environment]
  # Informa√ß√µes do sistema
  SYSTEM_NAME = "Sistema de Automa√ß√£o e IA"
  SYSTEM_VERSION = "6.0"
  
  # Desenvolvedor
  AUTHOR = "Marcelo D'√°vila"
  AUTHOR_EMAIL = "suporte@marcelodavila.com.br"
  COPYRIGHT = "¬© 2025 Marcelo D'√°vila - Todos os direitos reservados"
  
  # URLs
  SITE_URL = "https://automation-system.netlify.app"
  API_URL = "https://api.automation-system.com"
  
  # Features
  ENABLE_ANALYTICS = "true"
  ENABLE_ERROR_REPORTING = "true"
  ENABLE_PERFORMANCE_MONITORING = "true"
  
  # Build info
  BUILD_TIMESTAMP = "auto"
  NODE_ENV = "production"

# ===============================================
# CONFIGURA√á√ïES DE FUNCTIONS
# ===============================================
[functions]
  directory = "netlify/functions"
  external_node_modules = ["axios", "lodash"]
  
  # Timeout para functions
  timeout = 30
  
  # Runtime do Node.js
  node_bundler = "esbuild"

# ===============================================
# CONFIGURA√á√ïES DE DEV
# ===============================================
[dev]
  command = "echo 'üöÄ Servidor de desenvolvimento iniciado'"
  targetPort = 3000
  port = 8888
  publish = "."
  autoLaunch = true
  
  [dev.env]
    SYSTEM_ENV = "development"
    DEBUG = "true"

# ===============================================
# CONFIGURA√á√ïES AVAN√áADAS
# ===============================================

# Configura√ß√µes de deploy
[build.ignore]
  command = "git diff --quiet HEAD^ HEAD ."

# Configura√ß√µes de performance
[build.processing.skip_processing]
  css = false
  js = false
  html = false
  images = false

# Rate limiting
[[rate_limiting]]
  path = "/api/*"
  window = "1m"
  max = 100
  
[[rate_limiting]]
  path = "/download/*"
  window = "1m"
  max = 10

# Geo-location
[[geo_ip]]
  path = "/api/location"
  
# Custom domains
[[custom_domains]]
  domain = "automation-system.com"
  branch = "main"

# ===============================================
# CONFIGURA√á√ïES DE MONITORAMENTO
# ===============================================
[monitoring]
  enabled = true
  
  [monitoring.uptime]
    urls = [
      "https://automation-system.netlify.app",
      "https://automation-system.netlify.app/health"
    ]
    
  [monitoring.performance]
    enabled = true
    threshold = 3000
    
  [monitoring.errors]
    enabled = true
    webhook = "https://hooks.slack.com/your-webhook"

# ===============================================
# METADADOS
# ===============================================
[site.metadata]
  name = "Sistema de Automa√ß√£o e IA v6.0"
  description = "300+ Ferramentas Profissionais para Automa√ß√£o, IA e Desenvolvimento"
  author = "Marcelo D'√°vila"
  email = "suporte@marcelodavila.com.br"
  version = "6.0"
  copyright = "¬© 2025 Marcelo D'√°vila - Todos os direitos reservados"
  license = "Propriet√°ria"
  keywords = ["automa√ß√£o", "IA", "chatbots", "whatsapp", "workflows"]
  category = "Software"
  language = "pt-BR"
  
  [site.metadata.social]
    github = "https://github.com/marcelodavila"
    email = "mailto:suporte@marcelodavila.com.br"
    website = "https://automation-system.netlify.app"
